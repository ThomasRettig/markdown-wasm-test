<html lang="en">
   <head>
      <meta charset="utf-8">
      <title>Markdown WASM Demo</title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="icon" href="https://twemoji.maxcdn.com/2/svg/1f441.svg">
      <link rel="stylesheet" href="https://rsms.me/raster/raster.css?v=8">
      <script type="text/javascript" src="https://unpkg.com/markdown-wasm@1.2.0/dist/markdown.js"></script>
      <link rel="stylesheet" href="https://rsms.me/markdown-wasm/highlight.css">
      <script type="text/javascript" async="" src="https://rsms.me/markdown-wasm/highlight.js"></script>
      <script type="text/javascript" src="https://unpkg.com/clipboard@2.0.8/dist/clipboard.min.js"></script>
      <style type="text/css">
        :root {
         --fontSize: 14px;
        }

        c.label {
         font-weight: 500;
         letter-spacing: 0;
         color: #999;
        }

        c.input,
        c.output {
         max-width: 50vw;
        }

        c.textarea textarea {
         flex: 1 1 auto;
         min-height: 50vh;
         border: 2px solid black;
         border-radius: 3px;
         padding: 1rem;
         font-size: 14px;
         width: 100%;
         height: auto;
         resize: vertical;
        }

        c.textarea textarea:focus {
         outline: none;
         border-color: var(--blue);
        }

        blockquote {
         padding-left: var(--lineHeight);
         border-left: 2px solid #ccc;
        }

        h1>a.anchor,
        h2>a.anchor,
        h3>a.anchor,
        h4>a.anchor,
        h5>a.anchor,
        h6>a.anchor {
         display: inline-block;
         float: left;
         height: 1.2em;
         width: 1em;
         margin-left: -1em;
         position: relative;
         outline: none;
        }

        .label {
          display: flex;
          justify-content: space-between;
        }

        .btn {
          cursor: pointer;
        }

        /*.anchor:target { background: yellow; }*/

        h1>a.anchor:before,
        h2>a.anchor:before,
        h3>a.anchor:before,
        h4>a.anchor:before,
        h5>a.anchor:before,
        h6>a.anchor:before {
         visibility: hidden;
         position: absolute;
         opacity: 0.2;
         right: 10;
         top: 0;
         width: 1em;
         font-weight: normal;
         font-size: 70%;
         line-height: inherit;
         content: "üîó";
         text-align: center;
        }

        h1>a.anchor:hover:before,
        h2>a.anchor:hover:before,
        h3>a.anchor:hover:before,
        h4>a.anchor:hover:before,
        h5>a.anchor:hover:before,
        h6>a.anchor:hover:before {
         visibility: visible;
         opacity: 0.8;
        }

        h1>a.anchor:focus:before,
        h2>a.anchor:focus:before,
        h3>a.anchor:focus:before,
        h4>a.anchor:focus:before,
        h5>a.anchor:focus:before,
        h6>a.anchor:focus:before,
        h1:hover .anchor:before,
        h2:hover .anchor:before,
        h3:hover .anchor:before,
        h4:hover .anchor:before,
        h5:hover .anchor:before,
        h6:hover .anchor:before {
         visibility: visible;
        }
      </style>
   </head>
   <body>
      <grid columns="2" class="_debug">
         <c>
            <h1>Markdown Wasm Demo</h1>
         </c>
         <c>
         </c>
         <c class="label">Type some Markdown<span class="btn" id="clipboard" data-clipboard-target="#markdown-input" title="Copy text to clipboard">Copy Markdown</span></c>
         <c class="label">HTML output</c>
         <c class="input textarea">
            <textarea class="code" id="markdown-input"># One morning, when Gregor Samsa woke from troubled dreams.
One morning, when Gregor Samsa woke from troubled dreams, he found himself *transformed* in his bed into a horrible  [vermin](http://en.wikipedia.org/wiki/Vermin "Wikipedia Vermin"). He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections. The bedding was hardly able to cover **strong** it and seemed ready to slide off any moment. His many legs, pitifully thin compared with the size of the rest of him, link waved abouthelplessly as he looked. <cite>‚ÄúWhat's happened to me?‚Äù</cite> he thought. It wasn't a dream. His room, a proper human room although a little too small, lay peacefully between its four familiar walls.</p>

## The bedding was hardly able to cover it.

It showed a lady fitted out with a fur hat and fur boa who sat upright, raising a heavy fur muff that covered the whole of her lower arm towards the viewer a solid fur muff into which her entire forearm disappeared..

### Things we know about Gregor's sleeping habits.

- He always slept on his right side.
- He has to get up early (to start another dreadful day).
- He has a drawer and a alarm clock next to his bed.
- His mother calls him when he gets up to late.


<table class="data">
  <tr>
    <th>Writer</th>
    <th>Nationality</th>
    <th>Genre</th>
    <th>Most famous book</th>
  </tr>
  <tr>
    <td>Franz Kafka</td>
    <td>Leo Tolstoy</td>
    <td>F. Scott Fitzgerald</td>
    <td>H.G. Wells</td>
  </tr>
  <tr>
    <td>Austrian</td>
    <td>Russia</td>
    <td>American</td>
    <td>British</td>
  </tr>
  <tr>
    <td>Literature & Fiction, Philosophy, Short Stories</td>
    <td>Literature & Fiction, Philosophy</td>
    <td>Literature & Fiction, Short Stories</td>
    <td>Science Fiction</td>
  </tr>
    <tr>
    <td>The Metamorphosis</td>
    <td>War & Piece</td>
    <td>The Great Gatsby</td>
    <td>War of the Worlds</td>
  </tr>
  </table>

First he wanted to stand up quietly and undisturbed, get dressed, above all have breakfast, and only then consider further action, for (he noticed this clearly) by thinking things over in bed he would not reach a reasonable conclusion. He remembered that he had already often felt a light pain or other in bed, perhaps the result of an awkward lying position, which later turned out to be purely imaginary when he stood up, and he was eager to see how his present fantasies would gradually dissipate. That the change in his voice was nothing other than the onset of a real chill, an occupational illness of commercial travelers, of that he had not the slightest doubt.

    function metamorphose(protagonist,author){
        if( protagonist.name.first === 'Gregor' && author.name.last === 'Kafka' ){
            protagonist.species = 'insect';
        }
    }

It was very easy to throw aside the blanket. He needed only to push himself up a little, and it fell by itself. But to continue was difficult, particularly because he was so unusually wide. He needed arms and hands to push himself upright. Instead of these, however, he had only many small limbs which were incessantly moving with very different motions and which, in addition, he was unable to control. If he wanted to bend one of them, then it was the first to extend itself, and if he finally succeeded doing with this limb what he wanted, in the meantime all the others, as if left free, moved around in an excessively painful agitation. "But I must not stay in bed uselessly," said Gregor to himself.

> At first he wanted to get off the bed with the lower part of his body, but this lower part (which he incidentally had not yet looked at and which he also couldn't picture clearly) proved itself too difficult to move. The attempt went so slowly. When, having become almost frantic, he finally hurled himself forward with all his force and without thinking, he chose his direction incorrectly, and he hit the lower bedpost hard. The violent pain he felt revealed to him that the lower part of his body was at the moment probably the most sensitive.

Thus, he tried to get his upper body out of the bed first and turned his head carefully toward the edge of the bed. He managed to do this easily, and in spite of its width and weight his body mass at last slowly followed the turning of his head. But as he finally raised his head outside the bed in the open air, he became anxious about moving forward any further in this manner, for if he allowed himself eventually to fall by this process, it would take a miracle to prevent his head from getting injured. And at all costs he must not lose consciousness right now. He preferred to remain in bed.

#### First five selected publications in English
1. The Castle
2. The Great Wall of China
3. The Trial
4. America  
5. The Diaries Of Franz Kafka

***</textarea>
         </c>
         <c class="output" id="html-output">
         </c>
      </grid>
      <script type="text/javascript">
         // await the loading of the web assembly module
         window["markdown"].ready.then(markdown => {
         
         const inputEl = document.getElementById("markdown-input")
         const outputEl = document.getElementById("html-output")
         let hljsTimer
         
         function update() {
           let source = inputEl.value
           let html = markdown.parse(source, {
             parseFlags: markdown.ParseFlags.DEFAULT,
           })
           outputEl.innerHTML = html
           updateCodeHighlight()
         }
         
         function updateCodeHighlight() {
           clearTimeout(hljsTimer)
           if (typeof hljs == "undefined") {
             hljsTimer = setTimeout(updateCodeSyntaxHighlighting, 500)
             return
           }
           document.querySelectorAll('pre code[class^="language-"]').forEach(block => {
             hljs.highlightBlock(block)
           })
         }
         
         inputEl.addEventListener("input", update)
         update()
         
         // load the markdown module to make it playable in the browser console
         console.log("markdown module API:", markdown)
         
         })
      </script>
      <script>
        var clipboard = new ClipboardJS('.btn');

        clipboard.on('success', function(e) {
            document.getElementById("clipboard").innerHTML = "Copied!";
            setTimeout(function (){
              document.getElementById("clipboard").innerHTML = "Copy Markdown";
            }, 1500);
            e.clearSelection();
        });
      </script>
   </body>
</html>